
(function($,window,document,undefined){var pluginName='jquery-focus-exit';$.fn.focusExit=function focusExit(){return this.each(function onEach(){if(!$.data(this,pluginName)){jQuery.data(this,pluginName,'true');var $this=$(this);var relatedTargetShim;var timeout;var onElementFocusIn=function(){window.clearTimeout(timeout);};var onDocumentFocusIn=function(e){relatedTargetShim=e.target;};$this.on('focusin',function(){$(document).on('focusin',onDocumentFocusIn);});$this.on('focusout',function onFocusOut(e){timeout=window.setTimeout(function onTimeout(){$(document).off('focusin',onDocumentFocusIn);$this.off('focusin',onElementFocusIn);$this.trigger('focusExit',{lostFocus:e.target,gainedFocus:e.relatedTarget||relatedTargetShim});},100);$this.one('focusin',onElementFocusIn);});}});};}(jQuery,window,document));