
(function($,window,document,undefined){var pluginName='jquery-focus-exit';$.fn.focusExit=function focusExit(options){options=$.extend({debug:false},options);return this.each(function onEachCollectionItem(){var $widget=$(this);var currentFocusElement;var $document=$(document);var $window=$(window);function onWidgetFocusIn(e){$document.one('focusin',onDocumentFocusIn);$window.off('blur',onWindowBlur).one('blur',onWindowBlur);}
function onWindowBlur(e){doFocusExit(undefined);}
function onDocumentFocusIn(e){var newFocusElement=e.target;var targetIsDescendant=$widget.get(0).contains(newFocusElement);if(targetIsDescendant===true){currentFocusElement=newFocusElement;$document.one('focusin',onDocumentFocusIn);}else{doFocusExit(newFocusElement);}}
function doFocusExit(newFocusElement){$widget.trigger('focusExit',{lostFocus:currentFocusElement,gainedFocus:newFocusElement});$widget.one('focusin',onWidgetFocusIn);currentFocusElement=null;}
if($.data(this,pluginName)===undefined){jQuery.data(this,pluginName,{installed:'true'});$widget.one('focusin',onWidgetFocusIn);}else if(options.debug===true){console.log('debug: {pluginName} is already installed on {element}'.replace('{pluginName}',pluginName).replace('{element}',this));}});};}(jQuery,window,document));